server.port=${TRADING_SERVICE_PORT:18092}
spring.threads.virtual.enabled=true

people.service.url=${PEOPLE_SERVICE_URL:http://${PEOPLE_SERVICE_HOST:localhost}:18089}
account.service.url=${ACCOUNT_SERVICE_URL:http://${ACCOUNT_SERVICE_HOST:localhost}:18088}
reference.data.service.url=${REFERENCE_DATA_SERVICE_URL:http://${REFERENCE_DATA_HOST:localhost}:18085}

trade.feed.address=${TRADE_FEED_ADDRESS:http://${TRADE_FEED_HOST:localhost}:18086}

# Database Configuration - FORCE TCP CONNECTION - NO FALLBACK
spring.datasource.url=jdbc:h2:tcp://database:18082/traderx;CASE_INSENSITIVE_IDENTIFIERS=TRUE;AUTO_SERVER=FALSE;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=sa
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.validation-timeout=10000
spring.datasource.hikari.leak-detection-threshold=60000
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# Disable embedded database detection
spring.datasource.embedded-database-connection=none

# Enable H2 Console to access the database
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=true
spring.h2.console.settings.trace=false
spring.h2.console.settings.web-admin-password=

# CDM Integration Configuration
traderx.cdm.enabled=${TRADERX_CDM_ENABLED:true}
traderx.cdm.fallback-to-legacy=${TRADERX_CDM_FALLBACK:true}
traderx.cdm.audit-trail=${TRADERX_CDM_AUDIT:true}
traderx.cdm.store-raw-events=${TRADERX_CDM_STORE_RAW:true}
traderx.cdm.validation.enabled=${TRADERX_CDM_VALIDATION:true}
traderx.cdm.performance.metrics=${TRADERX_CDM_METRICS:true}

# To avoid "Request header is too large" when application is backed by oidc proxy.
server.max-http-request-header-size=1000000

logging.level.root=info
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=DEBUG